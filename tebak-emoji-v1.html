<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tebak Emoji V1</title>
    <style>
        :root { 
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --sun-yellow: #FFC107;
            --bg-soft: #f0f2f5;
            --white: #ffffff; 
            --wood-brown: #4834d4;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: var(--bg-soft);
            margin: 0; padding: 15px;
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; width: 100vw; overflow: hidden;
        }

        #game-container { 
            background: #ffffff; padding: 20px; border-radius: 30px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            text-align: center; width: 100%; max-width: 400px; 
            border: 4px solid var(--primary-color); position: relative;
        }

        .stats-bar { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 10px; background: #f1f2f6; padding: 10px 15px; 
            border-radius: 15px; font-weight: bold;
        }

        /* Label Kategori Baru */
        #category-label {
            background: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #emoji-display { 
            font-size: 90px; margin: 15px 0; 
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
            user-select: none;
        }

        .slots-container { 
            display: flex; justify-content: center; gap: 6px; margin: 15px 0; 
            min-height: 50px; flex-wrap: wrap; 
        }

        .slot { 
            width: 35px; height: 45px; 
            border: 2px solid #dfe6e9; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 20px; font-weight: bold; 
            background: #fdfdfd; transition: 0.2s;
        }

        .slot.filled { border-color: var(--primary-color); background: var(--secondary-color); color: white; }

        .letters-container { 
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; 
            margin-top: 15px; padding: 10px;
        }

        .letter-btn { 
            aspect-ratio: 1/1; font-size: 18px; cursor: pointer; 
            background: var(--white); border: 2px solid #dfe6e9; 
            border-radius: 10px; font-weight: bold; 
            transition: 0.1s;
        }

        .letter-btn:active { background: #f1f2f6; transform: scale(0.9); }
        .letter-btn:disabled { opacity: 0.2; cursor: default; }

        #message { margin: 10px 0; font-weight: bold; min-height: 25px; }

        .action-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .btn { padding: 12px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; color: white; }
        .btn-hint { background: #fdcb6e; color: #636e72; }
        .btn-clear { background: #ff7675; }
        .btn-next { grid-column: span 2; background: #55efc4; color: #2d3436; font-size: 1.2rem; display: none; }

        .reset-link { margin-top: 20px; font-size: 11px; color: #b2bec3; cursor: pointer; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="stats-bar">
        <div id="level-display">LV 1</div>
        <div style="color: #f1c40f">üí∞ <span id="coin-count">50</span></div>
    </div>

    <div id="category-label">KATEGORI</div>
    <div id="emoji-display">‚ùì</div>
    
    <div class="slots-container" id="slots"></div>
    <div id="message"></div>
    <div class="letters-container" id="letters"></div>

    <div class="action-btns">
        <button class="btn btn-hint" onclick="useHint()">HINT (20)</button>
        <button class="btn btn-clear" onclick="hapusTerakhir()">HAPUS</button>
        <button class="btn btn-next" id="next-btn" onclick="nextLevel()">LANJUT! ‚ûî</button>
    </div>
    <div class="reset-link" onclick="resetGame()">Reset Semua Progres</div>
</div>

<script>
    // DATABASE BARU: Campuran berbagai kategori
    const quizData = [
  { n: "NANGIS", e: "üò≠", c: "Ekspresi" },
  { n: "MARAH", e: "üò°", c: "Ekspresi" },
  { n: "SENYUM", e: "üòä", c: "Ekspresi" },
  { n: "TERTAWA", e: "üòÇ", c: "Ekspresi" },
  { n: "TAKUT", e: "üò±", c: "Ekspresi" },
  { n: "KAGET", e: "üò≤", c: "Ekspresi" },
  { n: "MALU", e: "üò≥", c: "Ekspresi" },
  { n: "SEDIH", e: "üò¢", c: "Ekspresi" },
  { n: "BAHAGIA", e: "üòÅ", c: "Ekspresi" },
  { n: "CAPEK", e: "ü•±", c: "Ekspresi" },

  { n: "DOKTER", e: "üë®‚Äç‚öïÔ∏è", c: "Profesi" },
  { n: "POLISI", e: "üëÆ", c: "Profesi" },
  { n: "GURU", e: "üë©‚Äçüè´", c: "Profesi" },
  { n: "PETANI", e: "üë®‚Äçüåæ", c: "Profesi" },
  { n: "PILOT", e: "üë®‚Äç‚úàÔ∏è", c: "Profesi" },
  { n: "KOKI", e: "üë®‚Äçüç≥", c: "Profesi" },
  { n: "PERAWAT", e: "üë©‚Äç‚öïÔ∏è", c: "Profesi" },
  { n: "MEKANIK", e: "üßë‚Äçüîß", c: "Profesi" },
  { n: "PROGRAMER", e: "üë®‚Äçüíª", c: "Profesi" },

  { n: "BURGER", e: "üçî", c: "Makanan" },
  { n: "PIZZA", e: "üçï", c: "Makanan" },
  { n: "NASI", e: "üçö", c: "Makanan" },
  { n: "MIE", e: "üçú", c: "Makanan" },
  { n: "AYAM", e: "üçó", c: "Makanan" },
  { n: "IKAN", e: "üêü", c: "Makanan" },
  { n: "SATE", e: "üç¢", c: "Makanan" },
  { n: "ROTI", e: "üçû", c: "Makanan" },
  { n: "KEJU", e: "üßÄ", c: "Makanan" },
  { n: "TELUR", e: "ü•ö", c: "Makanan" },

  { n: "TIDUR", e: "üò¥", c: "Aktivitas" },
  { n: "LARI", e: "üèÉ", c: "Aktivitas" },
  { n: "JALAN", e: "üö∂", c: "Aktivitas" },
  { n: "RENANG", e: "üèä", c: "Aktivitas" },
  { n: "MAKAN", e: "üçΩÔ∏è", c: "Aktivitas" },
  { n: "MINUM", e: "ü•§", c: "Aktivitas" },
  { n: "BELAJAR", e: "üìö", c: "Aktivitas" },
  { n: "MENULIS", e: "‚úçÔ∏è", c: "Aktivitas" },
  { n: "MEMBACA", e: "üìñ", c: "Aktivitas" },
  { n: "BERMAIN", e: "üéÆ", c: "Aktivitas" },

  { n: "HUJAN", e: "üåßÔ∏è", c: "Cuaca" },
  { n: "PANAS", e: "ü•µ", c: "Cuaca" },
  { n: "DINGIN", e: "ü•∂", c: "Cuaca" },
  { n: "CERAH", e: "‚òÄÔ∏è", c: "Cuaca" },
  { n: "BADAI", e: "üå©Ô∏è", c: "Cuaca" },
  { n: "SALJU", e: "‚ùÑÔ∏è", c: "Cuaca" },

  { n: "GITAR", e: "üé∏", c: "Musik" },
  { n: "PIANO", e: "üéπ", c: "Musik" },
  { n: "DRUM", e: "ü•Å", c: "Musik" },

  { n: "BOLA", e: "‚öΩ", c: "Olahraga" },
  { n: "BASKET", e: "üèÄ", c: "Olahraga" },
  { n: "TENIS", e: "üéæ", c: "Olahraga" },

  { n: "MEJA", e: "ü™ë", c: "Benda" },
  { n: "KURSI", e: "üí∫", c: "Benda" },
  { n: "BUKU", e: "üìò", c: "Benda" },
  { n: "PENSIL", e: "‚úèÔ∏è", c: "Benda" },
  { n: "TELPON", e: "üì±", c: "Benda" },
  { n: "LAPTOP", e: "üíª", c: "Benda" },

  { n: "CINTA", e: "‚ù§Ô∏è", c: "Perasaan" },
  { n: "RINDU", e: "ü•∫", c: "Perasaan" },
  { n: "SAYANG", e: "üíû", c: "Perasaan" },

  { n: "KUCING", e: "üê±", c: "Hewan" },
  { n: "ANJING", e: "üê∂", c: "Hewan" },
  { n: "SAPI", e: "üêÆ", c: "Hewan" },
  { n: "KAMBING", e: "üêê", c: "Hewan" },
  { n: "AYAM", e: "üêî", c: "Hewan" },

  { n: "MOBIL", e: "üöó", c: "Transportasi" },
  { n: "MOTOR", e: "üèçÔ∏è", c: "Transportasi" },
  { n: "BUS", e: "üöå", c: "Transportasi" },
  { n: "KERETA", e: "üöÜ", c: "Transportasi" },

  { n: "RUMAH", e: "üè†", c: "Tempat" },
  { n: "SEKOLAH", e: "üè´", c: "Tempat" },
  { n: "KANTOR", e: "üè¢", c: "Tempat" },

  { n: "APEL", e: "üçé", c: "Buah" },
  { n: "PISANG", e: "üçå", c: "Buah" },
  { n: "MANGGA", e: "ü•≠", c: "Buah" },

  { n: "MERAH", e: "üü•", c: "Warna" },
  { n: "BIRU", e: "üü¶", c: "Warna" },
  { n: "HIJAU", e: "üü©", c: "Warna" },

  { n: "API", e: "üî•", c: "Alam" },
  { n: "AIR", e: "üíß", c: "Alam" },
  { n: "ANGIN", e: "üå¨Ô∏è", c: "Alam" },

  { n: "PINTAR", e: "üß†", c: "Sifat" },
  { n: "RAJIN", e: "üí™", c: "Sifat" },
  { n: "MALAS", e: "üò¥", c: "Sifat" },

  { n: "KAMERA", e: "üì∑", c: "Teknologi" },
  { n: "TELEVISI", e: "üì∫", c: "Teknologi" },
  { n: "ROBOT", e: "ü§ñ", c: "Teknologi" }
];

    let state = { 
        level: 0, 
        koin: 50, 
        antrean: [], 
        jawaban: [], 
        tombols: [], 
        cleared: false 
    };

    function init() {
        const savedLevel = localStorage.getItem('emoji_lvl');
        const savedCoins = localStorage.getItem('emoji_coin');
        const savedQueue = localStorage.getItem('emoji_queue');

        state.level = savedLevel ? parseInt(savedLevel) : 0;
        state.koin = savedCoins ? parseInt(savedCoins) : 50;

        if (savedQueue) {
            state.antrean = JSON.parse(savedQueue);
        } else {
            // Acak urutan kuis
            state.antrean = [...quizData].sort(() => Math.random() - 0.5);
            localStorage.setItem('emoji_queue', JSON.stringify(state.antrean));
        }
        load();
    }

    function load() {
        if(state.level >= state.antrean.length) {
            document.getElementById('game-container').innerHTML = "<h1>üèÜ EMOJI MASTER!</h1><p>Kamu hebat!</p><button class='btn btn-clear' onclick='resetGame()'>MAIN LAGI</button>";
            return;
        }
        const cur = state.antrean[state.level];
        state.jawaban = []; 
        state.cleared = false;
        
        document.getElementById('emoji-display').innerText = cur.e;
        document.getElementById('category-label').innerText = cur.c; // Tampilkan Kategori
        document.getElementById('level-display').innerText = `LV ${state.level + 1}`;
        document.getElementById('coin-count').innerText = state.koin;
        document.getElementById('message').innerText = "";
        document.getElementById('next-btn').style.display = "none";

        // Siapkan tombol huruf
        let answerLetters = cur.n.toUpperCase().split(''); 
        let alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
        let distractors = alphabet.filter(char => !answerLetters.includes(char)).sort(() => Math.random() - 0.5);

        let finalPool = [...answerLetters];
        while(finalPool.length < 12) finalPool.push(distractors.pop());

        state.tombols = finalPool.sort(() => Math.random() - 0.5).map(c => ({ c, used: false }));
        render();
    }

    function render() {
        const cur = state.antrean[state.level];
        const slots = document.getElementById('slots');
        slots.innerHTML = "";
        for(let i=0; i<cur.n.length; i++) {
            const val = state.jawaban[i] ? state.jawaban[i].c : "";
            slots.innerHTML += `<div class="slot ${val?'filled':''}">${val}</div>`;
        }

        const keyboard = document.getElementById('letters');
        keyboard.innerHTML = "";
        state.tombols.forEach((t, i) => {
            const b = document.createElement('button');
            b.className = 'letter-btn';
            b.innerText = t.c;
            b.disabled = t.used || state.cleared;
            b.onclick = () => press(i);
            keyboard.appendChild(b);
        });
    }

    function press(idx) {
        const cur = state.antrean[state.level];
        if(state.jawaban.length < cur.n.length && !state.tombols[idx].used) {
            state.tombols[idx].used = true;
            state.jawaban.push({ c: state.tombols[idx].c, idx: idx });
            render();
            if(state.jawaban.length === cur.n.length) check();
        }
    }

    function check() {
        const cur = state.antrean[state.level];
        const userWord = state.jawaban.map(j => j.c).join('');
        const msg = document.getElementById('message');
        
        if(userWord === cur.n.toUpperCase()) {
            state.cleared = true; 
            msg.innerText = "‚ú® BENAR! +10 Koin";
            msg.style.color = "#2ecc71";
            state.koin += 10;
            document.getElementById('next-btn').style.display = "block";
            localStorage.setItem('emoji_lvl', state.level + 1);
            localStorage.setItem('emoji_coin', state.koin);
            render();
        } else {
            msg.innerText = "‚ùå SALAH!";
            msg.style.color = "#e74c3c";
        }
    }

    function hapusTerakhir() {
        if(state.jawaban.length > 0 && !state.cleared) {
            const last = state.jawaban.pop();
            state.tombols[last.idx].used = false;
            document.getElementById('message').innerText = "";
            render();
        }
    }

    function useHint() {
        if(state.koin >= 20 && !state.cleared) {
            const cur = state.antrean[state.level];
            const correctLetters = cur.n.toUpperCase().split('');
            const currentIdx = state.jawaban.length;
            
            // Hapus jika ada yang salah di posisi sekarang
            if(state.jawaban[currentIdx] && state.jawaban[currentIdx].c !== correctLetters[currentIdx]) {
                hapusTerakhir();
            }

            const neededChar = correctLetters[state.jawaban.length];
            const btnIdx = state.tombols.findIndex(t => t.c === neededChar && !t.used);
            
            if(btnIdx !== -1) {
                state.koin -= 20;
                document.getElementById('coin-count').innerText = state.koin;
                press(btnIdx);
            }
        }
    }

    function nextLevel() {
        state.level++;
        load();
    }

    function resetGame() {
        if(confirm("Reset semua?")) {
            localStorage.clear();
            location.reload();
        }
    }

    init();
</script>
</body>
</html>
